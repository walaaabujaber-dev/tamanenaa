<script>
const ayat = [
  "﴿وَعَسَىٰ أَن تَكْرَهُوا شَيْئًا وَهُوَ خَيْرٌ لَّكُمْ﴾ — (البقرة 216)", // مخصصة لولاء
  "﴿وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا﴾ — (الطلاق 2)", // مخصصة لندى
  "﴿لَا تَحْزَنْ إِنَّ اللَّهَ مَعَنَا﴾ — (التوبة 40)", // مخصصة لمنى
  "﴿إِنَّ مَعَ الْعُسْرِ يُسْرًا﴾ — (الشرح 6)", // مخصصة لسارة
  "﴿وَرَحْمَتِي وَسِعَتْ كُلَّ شَيْءٍ﴾ — (الأعراف 156)", // مخصصة لأسماء
  "﴿وَمَن يَتَوَكَّلْ عَلَى اللَّهِ فَهُوَ حَسْبُهُ﴾ — (الطلاق 3)", // مخصصة لروان
  "﴿ادْعُونِي أَسْتَجِبْ لَكُمْ﴾ — (غافر 60)", // مخصصة لـ (اسماء) بدون همزة
  "﴿إِنَّ رَبِّي لَطِيفٌ لِمَا يَشَاءُ﴾ — (النمل 40)", // مخصصة لأمال بالهمزة المقطوعة
  "﴿وَهُوَ عَلَيْكُمْ رَحِيمٌ﴾ — (البقرة 163)", // مخصصة لآمال بالهمزة الممدودة
  "﴿إِنَّهُ عَلِيمٌ بِذَاتِ الصُّدُورِ﴾ — (غافر 19)", // مخصصة لياسمين
  "﴿وَبَشِّرِ الصَّابِرِينَ﴾ — (البقرة 155)", // مخصصة لرندا
  "﴿لَا تَدْرِي لَعَلَّ اللَّهَ يُحْدِثُ بَعْدَ ذَٰلِكَ أَمْرًا﴾ — (الطلاق 1)", // مخصصة لوسيم
  
  // آيات وعبارات متبقية للأسماء الأخرى (يتم اختيارها عشوائياً بالهاش)
  "﴿أَلَيْسَ اللَّهُ بِكَافٍ عَبْدَهُ﴾ — (الزمر 36)",
  "﴿قُلْ يَا عِبَادِيَ الَّذِينَ أَسْرَفُوا عَلَىٰ أَنفُسِهِمْ لَا تَقْنَطُوا مِن رَّحْمَةِ اللَّهِ﴾ — (الزمر 53)",
  "﴿إِذْ يَغْشَاكُمُ النُّعَاسُ أَمَنَةً مِّنْهُ﴾ — (الأنفال 11)",
  "كن على يقين: كل عسير إذا استعنت بالله فهو يسير.",
  "ثق أن الله لم يمنع عنك حاجة إلا ولك في المنع خيراً تجهله.",
  "تفاءل؛ فالله لا يضع ثقلاً على روحٍ لا تستطيع حمله.",
  "دع المقادير تجري في أعنتها، ولا تبيتن إلا خالي البال."
];

// قائمة التعيين المخصص للأسماء لتجنب التكرار
const uniqueNameMapping = {
  "ولاء": 0,
  "ندى": 1,
  "منى": 2,
  "سارة": 3,
  "أسماء": 4, 
  "روان": 5,
  "اسماء": 6, 
  "أمال": 7, 
  "آمال": 8, 
  "ياسمين": 9,
  "رندا": 10,
  "وسيم": 11
};

function nameHash(name) {
  const s = name.normalize('NFC');
  let h = 2166136261;
  for (let i = 0; i < s.length; i++) {
    h ^= s.charCodeAt(i);
    h = (h * 16777619) >>> 0;
  }
  return h;
}

function getAyahForName(name) {
  const clean = name.replace(/[^؀-ۿa-zA-Z\s'-]/g, '').trim();
  if (!clean) return null;

  // 1. التحقق من التعيين المخصص للأسماء المطلوبة
  const customIndex = uniqueNameMapping[clean];
  if (customIndex !== undefined) {
    return ayat[customIndex];
  }

  // 2. الرجوع إلى دالة الهاش للأسماء الأخرى
  const idx = nameHash(clean) % ayat.length;
  return ayat[idx];
}

function showAyah() {
  const input = document.getElementById('username');
  const name = input.value;
  const ay = getAyahForName(name);
  const box = document.getElementById('ayah');
  if (!ay) {
    alert('الرجاء إدخال اسم صالح (حروف فقط).');
    box.style.display = 'none';
    return;
  }
  box.innerHTML = `<strong>${escapeHtml(name)}</strong> ❤️<br/><br/>${ay}`;
  box.style.display = 'block';
}

document.getElementById('username').addEventListener('keydown', function(e){ if(e.key==='Enter'){ showAyah(); }});
document.getElementById('showBtn').addEventListener('click', showAyah);

function escapeHtml(text) {
  const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;' };
  return text.replace(/[&<>"']/g, function(m){ return map[m]; });
}
</script>
